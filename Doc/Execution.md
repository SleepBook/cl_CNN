#Execution Module
***This module which is implemented in C++/OpenCL can take in a '.cnet' file and execute the NN it represent***

###Brief Introduction
this module realize a class called `clcnn`. Current it's compiled as a library(but you can easily modify this by change the `Makefile`). This class encapsulate the interfaces you may use to execute a CNN on your input data, either on CPU or OpenCL devices.

###Quick Start
In your source, include the `clcnn.h`. Then in your program, you should first create an instance of class `clcnn` with a .cnet file, then you can either run the CNN on CPU by calling the 
```cpp
clcnn::execute_cpu("input_data.cdat")
```
or to execute on OpenCL device by:
```cpp
clcnn::execute_device("input_data.cdat")
```
then depending on the purpose of your NN, you may use
```cpp
clcnn::predict()
```
to solve classification problems or use
```cpp
clcnn::retrieve_result(float* buf, int length)
```
to retrieve the output value generated by the NN, the data will be stored in the `buf` with `length` indicating how many float numbers you want to retrieve( if it's more than the output port number, all the output value will be retrieved.

If you are concerned with how much time it takes to do the execution, you may call
```cpp
clcnn::get_execution_time();
```
It will return a float value, indicating the execution time in microseconds.

Also, you may need to go through an interactive process the first time you execute the CNN on OpenCL processors to decide which exact processor you want to use for the computing.

###API Description

`clcnn::clcnn(const char*)`: the constructor takes a filename as input and initialize the instance using the configure file. internally it will call the load function at the first time. and will set up the data structure to represent the mlp NN as well as set the OpenCL environment.

`int clcnn::getInput()`:  this function puts the input data into the proper position in a inner data-structure, namely the floar array h_input. when using this class under a specific environment, user need to modify this func. return 0 when the function works correctly, and -1 when a error happens

`int clcnn::execute_cpu()`:  this function will calculate the output from the input, and put the result in the float array h_output. the calculation is carried out by CPU, and execution time is recorded. return 0 when the function works correctly, and -1 when a error happens

`int clcnn::execute_device()`:  do the same job as execute_cpu, but the work is done by an OpenCL computing device, the execution time is recorded. return 0 when the function works correctly, and -1 when a error happens

`int clcnn::predict()`:  when the cnn is used to do classification. this function is used to return which class the input data belong to.

`int clcnn::retrieve_result(float*, int)`:  when the cnn is used to do regression, this function can be used to get the value, the result will be put in the space pointed by the first parameter, with the second parameter restrict the width. return 0 when the function works correctly, and -1 when a error happens

`float clcnn::get_execution_time()`:  return the execution time on, unit is micro-second.


###The Instructions on Macros:
`WIN/UNIX`: you need to define one depend on your OS, because the precise timer is different.

`VISUAL`: if this macro is defined, the input data will be visualized and show out.
